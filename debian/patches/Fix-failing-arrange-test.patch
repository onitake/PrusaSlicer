From f2ae32780eb8ec9437e0134b08a5e1c752353527 Mon Sep 17 00:00:00 2001
From: tamasmeszaros <meszaros.q@gmail.com>
Date: Mon, 2 Oct 2023 12:07:14 +0200
Subject: [PATCH] Fix failing arrange test on newest msvc

---
 src/libslic3r/Arrange/Core/NFP/Kernels/GravityKernel.hpp | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/libslic3r/Arrange/Core/NFP/Kernels/GravityKernel.hpp b/src/libslic3r/Arrange/Core/NFP/Kernels/GravityKernel.hpp
index c8a5488b3..3bb1cad0e 100644
--- a/src/libslic3r/Arrange/Core/NFP/Kernels/GravityKernel.hpp
+++ b/src/libslic3r/Arrange/Core/NFP/Kernels/GravityKernel.hpp
@@ -17,7 +17,9 @@ struct GravityKernel {
     std::optional<Vec2crd> item_sink;
     Vec2d active_sink;
 
-    GravityKernel(Vec2crd gravity_center) : sink{gravity_center} {}
+    GravityKernel(Vec2crd gravity_center) :
+        sink{gravity_center}, active_sink{unscaled(gravity_center)} {}
+
     GravityKernel() = default;
 
     template<class ArrItem>
-- 
2.42.0

